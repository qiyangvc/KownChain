# KnowChain 前后端对接功能验收清单

## 总体验收环境准备

### 1. 环境启动验收
- [x] 数据库初始化成功 (`init-database.bat`)
- [x] 后端服务启动成功 (`start-backend.bat`)
  - [x] 端口8080正常监听
  - [x] 无启动错误日志
- [x] 前端服务启动成功 (`start-frontend.bat`)
  - [x] 端口5173正常访问
  - [x] 代理配置工作正常

## 用户认证功能验收

### 2. 用户登录功能
**测试账户：**
- 用户名：`admin123`，密码：`admin123`
- 用户名：`test123`，密码：`test123`

**验收步骤：**
- [ ] 正确的用户名密码能成功登录
- [ ] 错误的用户名显示"账号不存在"
- [ ] 错误的密码显示"密码错误"
- [ ] 登录成功后跳转到主界面
- [ ] 登录成功后localStorage中保存了token和用户信息
- [ ] 登录后能正常访问需要认证的页面

### 3. 用户注册功能
**验收步骤：**
- [ ] 用户名长度验证（不能为空）
- [ ] 密码长度验证（不少于6位）
- [ ] 邮箱格式验证
- [ ] 确认密码一致性验证
- [ ] 用户名重复检测
- [ ] 邮箱重复检测
- [ ] 注册成功后跳转到登录页面
- [ ] 新注册用户能正常登录

### 4. 重置密码功能
**验收步骤：**
- [ ] 输入已注册的邮箱，显示"重置密码邮件已发送"
- [ ] 输入未注册的邮箱，显示"邮箱不存在"
- [ ] 邮箱格式验证正常工作

## 文件管理功能验收

### 5. 文件树获取功能
**验收步骤：**
- [ ] 登录后能正常显示用户文件树
- [ ] 空文件树显示正常
- [ ] 多级文件夹结构显示正确
- [ ] 文件和文件夹图标区分正确

### 6. 文件创建功能
**验收步骤：**

**创建文件：**
- [ ] 在根目录创建文件
  - [ ] 文件保存在 `{项目根目录}/docs/users/{userId}/文件名`
  - [ ] 数据库中记录URL为相对路径 `docs/users/{userId}/文件名`
- [ ] 在子文件夹中创建文件
  - [ ] 文件保存在正确的子目录中
  - [ ] 路径结构正确

**创建文件夹：**
- [ ] 在根目录创建文件夹
  - [ ] 物理文件夹在 `{项目根目录}/docs/users/{userId}/文件夹名/`
  - [ ] 数据库中URL为null
- [ ] 在子文件夹中创建文件夹
  - [ ] 支持多级嵌套
- [ ] 同名检测正常工作

### 7. 文件内容操作功能
**验收步骤：**

**文件内容读取：**
- [ ] 点击文件能正常打开并显示内容
- [ ] 空文件显示空白内容
- [ ] 中文内容显示正确（UTF-8编码）
- [ ] 文件不存在时显示错误提示

**文件内容保存：**
- [ ] 修改文件内容后保存成功
- [ ] 保存后刷新页面内容仍然正确
- [ ] 保存后物理文件内容确实更新
- [ ] 中文内容保存正确

### 8. 文件删除功能
**验收步骤：**
- [ ] 删除文件
  - [ ] 文件从文件树中消失
  - [ ] 物理文件被删除
  - [ ] 数据库记录被删除
- [ ] 删除文件夹
  - [ ] 文件夹及其所有子内容被删除
  - [ ] 数据库中相关记录被清理
- [ ] 权限验证（不能删除其他用户的文件）

## 数据存储结构验收

### 9. 文件存储路径验收
**验收步骤：**
- [ ] 验证用户1的文件存储在 `{项目根目录}/docs/users/1/`
- [ ] 验证用户2的文件存储在 `{项目根目录}/docs/users/2/`
- [ ] 验证嵌套文件夹结构正确
- [ ] 验证文件路径不会出现在桌面或其他意外位置

### 10. 数据库存储验证
**验收步骤：**
- [ ] 文件记录的URL字段存储相对路径
- [ ] 文件夹记录的URL字段为null
- [ ] parentFID关系正确
- [ ] userID关联正确
- [ ] isDir字段正确标识文件和文件夹

## 安全性验收

### 11. 权限控制验收
**验收步骤：**
- [ ] 用户只能看到自己的文件树
- [ ] 用户不能访问其他用户的文件内容
- [ ] 用户不能删除其他用户的文件
- [ ] 未登录用户无法访问文件操作接口

### 12. 输入验证验收
**验收步骤：**
- [ ] 文件名不能为空
- [ ] 文件名不能包含非法字符
- [ ] 同名文件/文件夹检测
- [ ] SQL注入防护（尝试特殊字符）

## 异常处理验收

### 13. 网络异常处理
**验收步骤：**
- [ ] 后端服务停止时前端显示错误提示
- [ ] 网络超时时显示超时提示
- [ ] token过期时自动跳转登录页面

### 14. 文件系统异常处理
**验收步骤：**
- [ ] 文件不存在时显示错误提示
- [ ] 权限不足时显示错误提示
- [ ] 磁盘空间不足时的处理

## 用户体验验收

### 15. 界面交互验收
**验收步骤：**
- [ ] 加载状态指示器正常工作
- [ ] 错误提示信息清晰明确
- [ ] 成功操作有确认反馈
- [ ] 操作响应时间合理

### 16. 数据一致性验收
**验收步骤：**
- [ ] 创建文件后立即在文件树中显示
- [ ] 删除文件后立即从文件树中消失
- [ ] 重命名后文件树更新正确
- [ ] 刷新页面后数据一致

## 配置和部署验收

### 17. 配置文件验收
**验收步骤：**
- [ ] 数据库连接配置正确
- [ ] 跨域配置生效
- [ ] 文件上传大小限制配置正确
- [ ] JWT配置正常工作

### 18. 目录结构验收
**验收步骤：**
- [ ] docs目录在项目根目录下
- [ ] docs目录已添加到.gitignore
- [ ] 测试文件能正常创建和访问
- [ ] 目录权限设置正确

## 完整流程验收

### 19. 端到端测试流程
**验收步骤：**
1. [ ] 注册新用户 → 登录 → 创建文件夹 → 创建文件 → 编辑文件 → 保存文件 → 删除文件 → 删除文件夹 → 登出
2. [ ] 多用户隔离测试：用户A创建文件，用户B无法访问
3. [ ] 数据持久化测试：重启服务后数据仍然存在

## 验收标准

### 通过标准
- [ ] 所有核心功能（登录、注册、文件CRUD）正常工作
- [ ] 文件存储在正确的目录结构中
- [ ] 用户权限控制有效
- [ ] 错误处理机制完善
- [ ] 无严重的安全漏洞

### 注意事项
- 测试时请使用Chrome或Firefox最新版本
- 确保测试过程中网络连接稳定
- 测试完成后检查docs目录下的文件结构
- 验收过程中如发现问题，请记录具体的重现步骤

---

**验收完成签名：**
- 验收人：_______________
- 验收日期：_______________
- 验收结果：□ 通过 □ 不通过
- 备注：_______________
